version: 4

jobs:
    publish_templates:
        image: node:6
        steps:
            - install: npm install screwdriver-template-main
            - publish: ./process_templates publish
        requires: [~commit]
        
    publish_sd_cmd:
        image: quay.io/pypa/manylinux2010_x86_64
        steps:
            - publish: sd-cmd publish -f sd-cmd/sd-command.yaml -t stable
        requires: [~commit]

    validate_templates:
        image: node:6
        steps:
            - install: npm install screwdriver-template-main
            - validate: ./process_templates validate
        requires: [~pr]
